<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}"
      th:with="layoutTitle='mogatshoo'">

<head>
    <!-- 페이지별 CSS 추가 -->
    <th:block layout:fragment="additionalStyles">
        <style>
            /* 기본 스타일 */
            body,
            html {
                margin: 0;
                padding: 0;
                height: 100%;
                font-family: 'Press Start 2P', cursive;
                background-color: #2B2BD8;
                overflow: hidden;
            }

            /* 비디오 컨테이너 */
            .video-container {
                position: relative;
                width: 100%;
                height: 100vh;
                overflow: hidden;
            }

            /* 비디오 스타일 - 수정 */
            .video-bg {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transform: translateY(-7%);
                position: absolute;
                top: 0;
                transform: translateZ(3%);
            }
        </style>
    </th:block>
</head>

<body>
    <!-- 본문 영역 -->
    <div layout:fragment="content">
        <!-- 비디오 컨테이너 -->
        <div class="video-container">
            <!-- 비디오 요소 -->
            <video class="video-bg" autoplay muted loop playsinline>
                <source src="/videos/main2.mp4" type="video/mp4">
            </video>
        </div>
    </div>

    <!-- 페이지별 스크립트 -->
    <th:block layout:fragment="additionalScripts">
        <script th:inline="javascript">
            document.addEventListener('DOMContentLoaded', function() {
                const video = document.querySelector('.video-bg');
                const container = document.querySelector('.video-container');
                
                // 비디오 로드 오류 처리
                video.addEventListener('error', function(e) {
                    console.error('비디오 로드 오류:', e);
                    container.style.backgroundColor = '#2B2BD8';
                });
                
                // 비디오 크기 및 위치 조정 함수
                function adjustVideo() {
                    const windowWidth = window.innerWidth;
                    const windowHeight = window.innerHeight;
                    const aspectRatio = 16 / 9; // 비디오의 가로세로 비율
                    
                    // 컨테이너 크기 설정
                    container.style.height = windowHeight + 'px';
                    
                    // 화면 비율과 비디오 비율 비교
                    const windowRatio = windowWidth / windowHeight;
                    
                    if (windowRatio < aspectRatio) {
                        // 화면이 비디오보다 세로로 길 경우
                        video.style.width = 'auto';
                        video.style.height = '100%';
                    } else {
                        // 화면이 비디오보다 가로로 넓을 경우
                        video.style.width = '100%';
                        video.style.height = 'auto';
                    }
                }
                
                // 초기 설정
                adjustVideo();
                
                // 창 크기 변경 시 재조정
                window.addEventListener('resize', adjustVideo);
                
                // 비디오 자동 재생 시도
                video.play().catch(function(err) {
                    console.log('비디오 자동 재생 실패:', err);
                    video.muted = true;
                    video.play();
                });
            });
        </script>
    </th:block>
</body>

</html>